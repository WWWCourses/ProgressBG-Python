<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>variousFormatsHandling</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <!-- css & themes include -->
  <link rel="stylesheet" href="/ProgressBG-Python/lib/reveal.js/css/reveal.css">
  <link rel="stylesheet" href="/ProgressBG-Python/outfit/css/themes/dark.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? '/ProgressBG-Python/lib/reveal.js/css/print/pdf.css' : '/ProgressBG-Python/lib/reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
  <!-- CUSTOM -->
  <base target="_blank">
</head>
<body>
  <div class="reveal default center" data-transition-speed="default" data-background-transition="default">
    <div class="top_links">
      <a class="home_link" href="/ProgressBG-Python/pages/agenda/agenda.html#variousFormatsHandling" target="_top"><i class="fa fa-home"></i></a>
      <span class="help_link" href="#"><i class="fa fa-question"></i></span>
      <div class="help_text">
        <div><span>N/Спейс</span><span>следващ слайд</span></div>
        <div><span>P</span><span>предишен слайд</span></div>
        <div><span>O</span><span>всички слайдове</span></div>
        <div><span>ctrl+left click</span><span>увеличава елемента</span></div>
      </div>
    </div>
    <div class="footer theme_switch">
      <a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-Python/outfit/css/themes/dark.css'); return false;">Dark</a>
      <a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-Python/outfit/css/themes/light.css'); return false;">Light</a>
      <a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-Python/outfit/css/themes/projector.css'); return false;">Projector</a>
    </div>
    <div class="slides">
<!--
########################################################
##################### SLIDES START #####################
########################################################
-->
<section><h1>Parsing various file formats</h1></section>
<section data-transition="zoom">
  <!-- linkedin badge -->
  <script type="text/javascript" src="https://platform.linkedin.com/badges/js/profile.js" async defer></script>
  <section class="copyright" data-transition="zoom">
    <div class="note">
      <p>Created for</p>
    </div>
    <div class="company">
      <a href="http://progressbg.net/програмиране-с-python-2/">
      <img style="height:80%" src="/ProgressBG-Python/outfit/images/logos/ProgressBG_logo_529_127.png">
      </a>
    </div>
    <div class="author">
      <span class="note">Iva E. Popova, 2018,</span>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
    </div>
  </section>
  <section class="copyright" data-transition="zoom" style="margin-top: -2em;">
    <div class="company">
       <div class="LI-profile-badge"  data-version="v1" data-size="large" data-locale="en_US" data-type="vertical" data-theme="dark" data-vanity="ivapopova"><a class="LI-simple-link" href='https://bg.linkedin.com/in/ivapopova?trk=profile-badge'>Iva E. Popova on LinkedIn</a></div>
    </div>
  </section>
</section>

<section><h1>Data Serialization</h1></section>
<section><h2>Data Serialization</h2>
  <section><h3>Overview</h3>
    <dl class="fa">
      <dt>Data serialization is the concept of converting structured data (lists, dictionaries, objects, etc) into a format that can be stored (for example, in a file) or transmitted and reconstructed later.</dt>
      <dt>The native data serialization module for Python is called Pickle.</dt>
      <dt><a href="https://docs.python.org/3/library/pickle.html"> pickle — Python object serialization</a></dt>
    </dl>
  </section>
  <section><h3>Example</h3>
    <pre><code rel="Python" class="python">
      import pickle

      # let's serialize a simple dict
      prices = { 'apples': 2.50, 'oranges': 1.90, 'bananas': 2.40 }

      #convert the object to a serialized string
      serialized_prices = pickle.dumps( prices )
      print(serialized_prices)

      #de-serialize (unpickle) an object
      received_prices = pickle.loads( serialized_prices )
      print(received_prices)
    </code></pre>
  </section>
  <section><h3>Notes</h3>
	  <dl class="fa">
	    <dt>For storing data in databases and archival storage, you’re probably better off using a more standard data encoding, such as JSON, XML, CSV</dt>
	  </dl>
	</section>
</section>


<section><h1>Parsing JSON</h1></section>
<section><h2>Parsing JSON</h2>
  <section><h3>Overview</h3>
    <dl class="fa">     
      <dt><abbr>JSON</abbr><dfn id="CSV"><span>Java</span><span>Script</span><span>Object</span><span>Notation</span></dfn></dt>
    </dl>
    <div>
      <blockquote cite="href="https://en.wikipedia.org/wiki/JSON"">JSON is an open-standard file format that uses human-readable text to transmit data objects consisting of <span class="note">attribute–value pairs and array data</span> types (or any other serializable value)</blockquote><a href="https://en.wikipedia.org/wiki/JSON">JSON @wikipedia</a>
    </div>    
  </section>
  <section><h3>Overview - Examples</h3>
    <p>examples of JSON data: <a href="http://json-schema.org/examples.html">Examples @JSON Schema</a></p>
    <pre><code rel="JSON" class="js">
      {
          "title": "Person",
          "type": "object",
          "properties": {
              "firstName": {
                  "type": "string"
              },
              "lastName": {
                  "type": "string"
              },
              "age": {
                  "description": "Age in years",
                  "type": "integer",
                  "minimum": 0
              }
          },
          "required": ["firstName", "lastName"]
      }
    </code></pre>
  </section>
  <section><h3>Overview - JSON in Python</h3>
    <dl class="fa">
      <dt>Python standard library provides the <code>json</code> module</dt>
      <dd><a href="https://docs.python.org/3/library/json.html">json — JSON encoder and decoder</a></dd>
    </dl>
  </section>

  <section><h3>Parse JSON string to Python objects.</h3>
    <dl class="fa">
      <dt><code>json.loads() function</code></dt>
      <dt>Deserialize s (a str, bytes or bytearray instance containing a JSON document) to a Python object using next <a href="https://docs.python.org/3/library/json.html#json-to-py-table">conversion table</a>.</dt>
    </dl>
  </section>  
  <section><h3><code>json.loads()</code> example</h3>
    <pre><code rel="Python" class="python">
      import json
      from operator import itemgetter

      json_str = """ 
        [
            {
                "name": "apple",
                "price": 1.80
            },
            {
                "name": "orange",
                "price": 2.10
            },
            {
                "name": "bananas",
                "price": 1.60
            }
        ]
      """


      #read json from string
      json_data = json.loads(json_str)

      # print the list sorted by "price" 
      for i in sorted(json_data,key=itemgetter("price")):
        print(i)
    </code></pre>
  </section>

  <section><h3>Parse JSON file to Python objects.</h3>
    <dl class="fa">
      <dt><code>json.load() function</code></dt>
      <dt>Deserialize fp (a .read()-supporting file-like object containing a JSON document) to a Python object using next <a href="https://docs.python.org/3/library/json.html#json-to-py-table">conversion table</a>.</dt>
    </dl>
  </section>
  <section><h3><code>json.load()</code> sample file</h3>
    <pre><code rel="sample.json" class="javascript" data-noescape>
        [
          {
              "name": "apple",
              "price": 1.80
          },
          {
              "name": "orange",
              "price": 2.10
          },
          {
              "name": "bananas",
              "price": 1.60
          }
        ]
    </code></pre>
  </section>
  <section><h3><code>json.load()</code> example</h3>
    <pre><code rel="Python" class="python">
    	import json
    	from operator import itemgetter

    	json_file = "sample.json"

    	#read json from file
    	with open(json_file) as f:
    	    json_data = json.load(f)

    	for i in sorted(json_data,key=itemgetter("price")):
    	  print(i)
    </code></pre>
  </section>

  <section><h3>Convert Python objects to JSON</h3>
    <dl class="fa">
    	<dt><code>json.dump() function</code></dt>
    	<dd>Serialize obj as a JSON formatted stream to fp (a .write()-supporting file-like object) using next <a href="https://docs.python.org/3/library/json.html#json-to-py-table">conversion table</a>.</dd>
      <dt><code>json.dumps() function</code></dt>
      <dd>Same as <code>dump()</code>, but serialize to string</dd>
    </dl>
  </section>
  <section><h3><code>json.dumps()</code> - list example</h3>
  	<pre><code rel="Python" class="python">
  		import json

  		mylist = [1,2,3]

  		matrix = [
  		    [1,2,3],
  		    [4,5,6],
  		    [7,8,9],
  		]

  		print('List :', json.dumps(mylist))
  		print('Matrix :', json.dumps(matrix))
  	</code></pre>
  </section>
  <section><h3><code>json.dumps()</code> - indented list example</h3>
  	<pre><code rel="Python" class="python">
  		import json

  		mylist = [1,2,3]

  		matrix = [
  		    [1,2,3],
  		    [4,5,6],
  		    [7,8,9],
  		]

  		print('List :', json.dumps(mylist,indent=2))
  		print('Matrix :', json.dumps(matrix,indent=2))
  	</code></pre>
  </section>
</section>


<section><h1>Parsing CSV</h1></section>
<section><h2>Parsing CSV</h2>
  <section><h3>Overview</h3>
    <dl class="fa">     
      <dt><abbr>CSV</abbr><dfn id="CSV"><span>Comma</span><span>Separated</span><span>Values</span></dfn></dt>
      <dt>the most common import and export format for spreadsheets and databases.</dt>
      <dt>For CSV parsing Python provides the built-in csv module </dt>
      <dd><a href="https://docs.python.org/3/library/csv.html">csv — CSV File Reading and Writing</a></dd>
    </dl>
  </section>
  <section><h3>Parsing CSV data - example</h3>
  	<pre><code rel="sample_data.csv" class="python">
  		Symbol,Price,Date,Time,Change,Volume
  		"AA",39.48,"6/11/2007","9:36am",-0.18,181800
  		"AIG",71.38,"6/11/2007","9:36am",-0.15,195500
  		"AXP",62.58,"6/11/2007","9:36am",-0.46,935000
  		"BA",98.31,"6/11/2007","9:36am",+0.12,104800
  		"C",53.08,"6/11/2007","9:36am",-0.25,360900
  		"CAT",78.29,"6/11/2007","9:36am",-0.23,225400
  	</code></pre>
  </section>
  <section><h3>Parsing CSV data - example</h3>
  	<pre><code rel="Python" class="python">
  		import csv
  		with open('sample_data.csv') as f:
  		  f_csv = csv.reader(f)
  		  headers = next(f_csv)
  		  for row in sorted(f_csv, key=lambda a:a[0]):
  		      print(row)
  	</code></pre>
  </section>
</section>


<section><h1>Parsing XML</h1></section>
<section><h2>Parsing XML</h2>
	<section><h3>Overview</h3>
		<dl class="fa">   		  
		  <dt><abbr>XML</abbr><dfn id="CSV">e<span>Xtensible</span><span>Markup</span><span>Language</span></dfn></dt>		  
		</dl>
		<blockquote> (XML) is a markup language that defines a set of rules for encoding documents in a format that is both human-readable and machine-readable.</blockquote>
		<a href="https://en.wikipedia.org/wiki/XML">XML @wikipedia</a>
	</section>
	<section><h3>Overview</h3>
		<p>Processing XML in Python:</p>
		<dl class="fa">
			<dt><a href="https://docs.python.org/3/library/xml.html">xml</a></dt>
			<dd>Built-in XML Processing Modules</dd>
			<dt><a href="https://github.com/stchris/untangle">untangle</a></dt>
			<dd>Converts XML to Python objects</dd>
			<dt><a href="https://github.com/martinblech/xmltodict">xmltodict</a></dt>
			<dd>xmltodict is a Python module that makes working with XML feel like you are working with JSON</dd>
		</dl>
	</section>
	<section><h3>Parsing XML data - example</h3>
		<pre><code rel="sample_data.xml" class="python">
			&lt;data&gt;  
			    &lt;items&gt;
			        &lt;item atr1=&quot;value1&quot;&gt;item1 data&lt;/item&gt;
			        &lt;item atr2=&quot;value2&quot;&gt;item2 data&lt;/item&gt;
			    &lt;/items&gt;
			&lt;/data&gt;  
		</code></pre>
	</section>
	<section><h3>Parsing XML data - example</h3>
		<pre><code rel="Python" class="python">
			import xml.etree.ElementTree as ET  
			tree = ET.parse('sample_data.xml')  
			root = tree.getroot()


			# print items attributes
			print('\nAll attributes:')  
			for elem in root:  
			    for subelem in elem:
			        print(subelem.attrib)

			# print items data
			print('\nAll item data:')  
			for elem in root:  
			    for subelem in elem:
			        print(subelem.text)
		</code></pre>
	</section>
</section>

<section id="hw"><h1>Exercises</h1></section>
<section><h2>Task1: Task1Title</h2>
  <section><h3>The Task</h3>
    <dl class="fa">
      <dt>Given is next JSON file: <a href="Task_and_HW/get_books_by_category/pythonbooks.revolunet.com.issues.json">pythonbooks.revolunet.com.issues.json</a>, which contains information about the books listed in <a href="https://pythonbooks.revolunet.com/">pythonbooks.revolunet.com</a></dt>
      <dt>Make a program, that will extract from these data only the "<span class="note">title</span>", "<span class="note">author</span>" and "<span class="note">url</span>" fields for the books labeled as "<span class="note">Advanced</span>", and will print the extracted information, as shown in <a href="Task_and_HW/get_books_by_category/output.txt">sample output</a>
      </dt>
    </dl>
  </section>  
</section>

<section><h3>Submission</h3>
  <dl class="fa">
    <dt>PLease, prefix your filenames/archive with your name initials, before sending.</dt>
    <dd>For instance: <b>iep_task1.py</b> or <b>iep_tasks.rar</b></dd>
    <dt>Send files to <a href="mailto:progressbg.python.course@gmail.com?Subject=variousFormatsHandling">progressbg.python.course@gmail.com</a></dt>
  </dl>
</section>

<section class="disclaimer" data-background="/ProgressBG-Python/outfit/images/for_slides/the_end_on_sand.jpg">
   <p>These slides are based on</p>
   <p>customised version of </p>
   <p><a href="http://hakim.se/">Hakimel</a>'s <a href="http://lab.hakim.se/reveal-js">reveal.js</a></p>
   <p>framework</p>
</section>
<!--
########################################################
##################### SLIDES END   #####################
########################################################
-->
    </div>
  </div>
  <!-- Custom processing -->
  <script src="/ProgressBG-Python/outfit/js/slides.js"></script>
  <!-- external scripts -->
  <script src="/ProgressBG-Python/lib/reveal.js/lib/js/head.min.js"></script>
  <script src="/ProgressBG-Python/lib/reveal.js/js/reveal.js"></script>
   <!-- init reveal -->
  <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    var highlightjsTabSize = '  ';
    Reveal.initialize({
      controls: true,
      progress: true,
      slideNumber: 'c/t',
      keyboard: true,
      history: true,
      center: true,
      width: 1024,
      height: 850,
      // Bounds for smallest/largest possible scale to apply to content
      // minScale: .5,
      maxScale: 1,
      // slide transition
      transition: 'concave', // none/fade/slide/convex/concave/zoom
      // Factor of the display size that should remain empty around the content
      margin: 0.1,
      // shift+maous click to zoom in/out element
      zoomKey: 'ctrl',
      // theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      // transition: Reveal.getQueryHash().transition || 'default'
      // Optional reveal.js plugins
      dependencies: [
        { src: '/ProgressBG-Python/lib/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: '/ProgressBG-Python/lib/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '/ProgressBG-Python/lib/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '/ProgressBG-Python/lib/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.configure({tabReplace: highlightjsTabSize}); hljs.initHighlightingOnLoad(); } },
        { src: '/ProgressBG-Python/lib/reveal.js/plugin/zoom-js/zoom.js', async: true },
        { src: '/ProgressBG-Python/lib/reveal.js/plugin/notes/notes.js', async: true }
      ]
    });
  </script>
</body>
</html>
